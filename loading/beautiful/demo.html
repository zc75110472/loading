<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta charset="UTF-8" />
<title>示例页面</title>
	<link rel="stylesheet" href="css/loading.css">
<script src="//ossweb-img.qq.com/images/js/jquery/jquery-1.11.3.min.js"></script>
<script src="resLoader.js"></script>
<style>

</style>
</head>
<body>

<!--加载动画-->
<div id="loading">
	<div id="loader">
		<div id="lemon"></div>
		<div id="straw"></div>
		<div id="glass">
			<div id="cubes">
				<div></div>
				<div></div>
				<div></div>
			</div>
			<div id="drink"></div>
			<span id="counter"></span>
		</div>
		<div id="coaster"></div>
	</div>
	<footer>Please wait while<br>we fill up your glass...</footer>
</div>

<script>
    var percent = 0;
var loader = new resLoader({
	resources : [
		'resLoader.js',
		'css/loading.css',
        'http://p2.qhimg.com/t01ed1438874f940dc0.jpg',
        'http://p9.qhimg.com/t01b4ff03b72c7dc6c7.jpg',
        'http://p2.qhimg.com/t01dd90dfbec92074d0.jpg',
        'http://p7.qhimg.com/t01cfec6d87cde457c5.jpg',
        'http://p9.qhimg.com/t01943ced462da67833.jpg',
        'http://p0.qhimg.com/t01943ced462da67833.jpg',
        'http://p6.qhimg.com/t01aa15a7ba7ccb49a7.jpg',
        'http://p8.qhimg.com/t010f1e8badf1134376.jpg',
        'http://p8.qhimg.com/t01cf37ea915533a032.jpg',
        'http://p3.qhimg.com/t0193d8a3963e1803e9.jpg',
        'http://p3.qhimg.com/t01cd6a4d4b4bd4457b.jpg'

	],
	onStart : function(total){
		console.log('start:'+total);
	},
	onProgress : function(current, total){
		console.log(current+'/'+total);
        percent = Math.round(current/total*100);
        $('#counter').html(percent+'%');
        $('#drink').css('top', (100-percent*.9)+'%');
        if(percent>=25) $('#cubes div:nth-child(1)').fadeIn(100);
        if(percent>=50) $('#cubes div:nth-child(2)').fadeIn(100);
        if(percent>=75) $('#cubes div:nth-child(3)').fadeIn(100);
        if(percent==100) {
            $('#lemon').fadeIn(100);
            $('#straw').fadeIn(300);
        }
	},
	onComplete : function(total){
		console.log("加载完毕" + total + "个资源" );
//        $("#loading").delay(500).fadeOut(500,function () {
//            $(this).remove();// 自杀
 //       })
	}
});

loader.start();


</script>

</body>
</html>